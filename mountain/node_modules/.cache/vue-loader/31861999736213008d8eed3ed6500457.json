{"remainingRequest":"/Users/zzz/Desktop/mac/unit/mountain/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/zzz/Desktop/mac/unit/mountain/src/views/module.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/zzz/Desktop/mac/unit/mountain/src/views/module.vue","mtime":1564384693257},{"path":"/Users/zzz/Desktop/mac/unit/mountain/node_modules/_css-loader@1.0.1@css-loader/index.js","mtime":499162500000},{"path":"/Users/zzz/Desktop/mac/unit/mountain/node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zzz/Desktop/mac/unit/mountain/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zzz/Desktop/mac/unit/mountain/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zzz/Desktop/mac/unit/mountain/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n  }\n",{"version":3,"sources":["module.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"module.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <el-upload\n      class=\"avatar-uploader\"\n      ref=\"upload\"\n      action=\"https://upload-z2.qiniup.com\"\n      :show-file-list=\"false\"\n      :auto-upload=\"false\"\n      :on-change=\"handleChange\"\n    >\n      <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n      <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n    </el-upload>\n    <el-button  @click=\"submitUpload\">上传到服务器</el-button>\n  </div>\n</template>\n\n<script>\nimport { qiniuupload } from '../api'\nexport default {\n  data () {\n    return {\n      imageUrl: '',\n      form: {\n        img: ''\n      }\n    }\n  },\n  methods: {\n    submitUpload () {\n      let para = new URLSearchParams((this.form))\n      qiniuupload(para).then(res => {\n        console.log(res)\n      })\n    },\n    handleChange (file, fileList) {\n      const _this = this\n      console.log(file)\n      this.imageUrl = URL.createObjectURL(file.raw) // 图片预览\n      let reader = new FileReader() //  生成文件读取\n      reader.readAsDataURL(file.raw) //  转化文件数据流链接\n      reader.onload = function () {\n        _this.form.img = reader.result //  拿到base64结果\n        console.log(_this.form.img)\n      }\n      // this.getImgToBase64(file.raw).then(res => {\n      //   console.log(res)\n      // })\n    },\n    getImgToBase64 (file) {\n      return new Promise(function (resolve, reject)  {\n        let reader = new FileReader()\n        let imgs = ''\n        reader.readAsDataURL(file)\n        reader.onload = function () {\n          imgs = reader.result\n        }\n        reader.onerror = error => {\n          reject(error)\n        }\n        reader.onloadend = () => {\n          resolve(imgs)\n        }\n      })\n    },\n  },\n  mounted() {\n    \n  },\n}\n</script>\n<style>\n.avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n  }\n</style>\n\n"]}]}