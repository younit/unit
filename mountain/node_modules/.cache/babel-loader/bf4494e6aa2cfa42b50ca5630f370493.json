{"remainingRequest":"/Users/zzz/Desktop/mac/unit/mountain/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/zzz/Desktop/mac/unit/mountain/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/zzz/Desktop/mac/unit/mountain/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/zzz/Desktop/mac/unit/mountain/src/views/article.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zzz/Desktop/mac/unit/mountain/src/views/article.vue","mtime":1562061627511},{"path":"/Users/zzz/Desktop/mac/unit/mountain/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zzz/Desktop/mac/unit/mountain/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zzz/Desktop/mac/unit/mountain/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zzz/Desktop/mac/unit/mountain/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport utils from \"../utils/index\";\nimport { articlesadd, articleslist, articlesedit, articlesdelete } from \"../api\";\nexport default {\n  name: '',\n  data: function data() {\n    return {\n      editorOption: {// some quill options\n      },\n      show: '',\n      //  默认显示列表\n      list: {\n        //  用户信息\n        data: [],\n        //  数据\n        total: 0 //  总数\n\n      },\n      para: {\n        //  查询条件\n        pageIndex: 1,\n        pageSize: 10\n      },\n      form: {\n        title: '',\n        content: ''\n      }\n    };\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    this.show = 'list';\n    this.getarticleslist();\n  },\n  methods: {\n    onEditorBlur: function onEditorBlur(quill) {\n      console.log('editor blur!', quill);\n    },\n    onEditorFocus: function onEditorFocus(quill) {\n      console.log('editor focus!', quill);\n    },\n    onEditorReady: function onEditorReady(quill) {\n      console.log('editor ready!', quill);\n    },\n    getarticleslist: function getarticleslist() {\n      var _this = this;\n\n      //  查询列表\n      articleslist(this.para).then(function (res) {\n        console.log(res);\n        var _res$data = res.data,\n            code = _res$data.code,\n            msg = _res$data.msg,\n            data = _res$data.data,\n            total = _res$data.total;\n\n        if (code !== 200) {\n          _this.$message.error(msg);\n        } else {\n          _this.list.data = data;\n          _this.list.total = total;\n        }\n      });\n    },\n    handleSet: function handleSet(obj, row) {\n      var _this2 = this;\n\n      //  根据不同状态处理对应事件\n      console.log(obj, row);\n\n      switch (obj) {\n        case 'add':\n          this.form = {};\n          this.show = 'add';\n          break;\n\n        case 'back':\n          this.show = 'list';\n          break;\n\n        case 'edit':\n          this.form = row;\n          this.show = 'edit';\n          break;\n\n        case 'delete':\n          this.show = 'list';\n          this.$confirm('此操作将删除该数据是否继续?', '提示', {\n            confirmButtonText: '继续',\n            cancelButtonText: '取消',\n            type: 'danger'\n          }).then(function () {\n            _this2.form._id = row._id;\n            var para = new URLSearchParams(_this2.form);\n            articlesdelete(para).then(function (res) {\n              var code = res.code,\n                  msg = res.msg;\n\n              if (code === 200) {\n                _this2.$message.success(msg);\n\n                _this2.getarticleslist();\n              } else {\n                _this2.$message.error(msg);\n              }\n            });\n          }).catch(function () {\n            _this2.$message.info('已取消');\n          });\n          break;\n      }\n    },\n    handleSubmit: function handleSubmit() {\n      var _this3 = this;\n\n      //  发布文章\n      if (this.form.title === '' || !this.form.title) {\n        this.$message.error('标题不能为空');\n      } else {\n        this.form.author = sessionStorage.getItem('user');\n        this.form.uid = sessionStorage.getItem('uid');\n        this.form.date = utils.formatterTime(new Date());\n        console.log(this.form);\n        var para = new URLSearchParams(this.form);\n        var a;\n\n        if (this.show === 'add') {\n          a = articlesadd(para);\n        } else {\n          a = articlesedit(para);\n        }\n\n        a.then(function (res) {\n          console.log(res);\n          var code = res.code,\n              msg = res.msg;\n\n          if (code === 200) {\n            _this3.getarticleslist();\n\n            _this3.show = 'list';\n\n            _this3.$message.success(msg);\n          } else {\n            _this3.$message.error(msg);\n          }\n        });\n      }\n    }\n  },\n  computed: {\n    editor: function editor() {\n      console.log(1);\n      return this.$refs.myQuillEditor.quill;\n    }\n  }\n};",{"version":3,"sources":["article.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"articles\">\n    <template v-if=\"show === 'list'\">\n      <div class=\"txtright marginbtm30\">\n         <el-button type=\"info\" @click=\"handleSet('add', {})\">发布文章</el-button>\n      </div>\n      <el-table\n        :data=\"list.data\"\n        style=\"width: 100%\">\n\n         <el-table-column label=\"标题\">\n          <template slot-scope=\"scope\">{{ scope.row.title }}</template>\n        </el-table-column>\n\n        <el-table-column label=\"作者\">\n          <template slot-scope=\"scope\">{{ scope.row.author }}</template>\n        </el-table-column>\n\n        <el-table-column label=\"日期\">\n          <template slot-scope=\"scope\">{{ scope.row.date }}</template>\n        </el-table-column>\n\n        <el-table-column label=\"喜欢\">\n          <template slot-scope=\"scope\">{{ scope.row.likes }}</template>\n        </el-table-column>\n\n        <el-table-column label=\"评分\">\n          <template slot-scope=\"scope\">{{ scope.row.score }}</template>\n        </el-table-column>\n\n        <el-table-column label=\"操作\" min-width=\"90\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              @click=\"handleSet('edit', scope.row)\">编辑</el-button>\n            <el-button\n              size=\"mini\"\n              type=\"danger\"\n              @click=\"handleSet('delete', scope.row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"txtcenter\">\n        <el-pagination\n          background\n          layout=\"total, prev, pager, next\"\n          @current-change=\"(value) => {return handleSearch('pagination', value)}\"\n          :current-page=\"para.pageIndex\"\n          :total=\"list.total\">\n        </el-pagination>\n      </div>\n    </template>\n\n    \n    <template v-if=\"show !== 'list'\">\n      <div class=\"articles__btn\">\n        <el-button type=\"info\" @click=\"handleSet('back', null)\" >返回</el-button>\n        <el-button type=\"success\" @click=\"handleSubmit\" >发布</el-button>\n      </div>\n      <div class=\"articles__title\">\n        <el-input ref=\"myinput\" placeholder=\"请输入标题\" v-model=\"form.title \" clearable></el-input>\n      </div>\n      <quill-editor \n        v-model=\"form.content\"\n        ref=\"myQuillEditor\"\n        :options=\"editorOption\"\n        @blur=\"onEditorBlur($event)\"\n        @focus=\"onEditorFocus($event)\"\n        @ready=\"onEditorReady($event)\">\n      </quill-editor>\n    </template>\n  </div>\n</template>\n\n<script>\nimport utils from '../utils/index'\nimport { articlesadd, articleslist, articlesedit, articlesdelete } from '../api'\nexport default {\n  name: '',\n  data () {\n    return {\n      editorOption: {\n        // some quill options\n      },\n      show: '', //  默认显示列表\n      list: { //  用户信息\n        data: [], //  数据\n        total: 0 //  总数\n      },\n      para: { //  查询条件\n        pageIndex: 1,\n        pageSize: 10,\n      },\n      form: {\n        title: '',\n        content: ''\n      }\n    }\n  },\n  created() {\n    \n  },\n  mounted() {\n    this.show = 'list'\n    this.getarticleslist()\n  },\n  methods: {\n    onEditorBlur (quill) {\n      console.log('editor blur!', quill)\n    },\n    onEditorFocus (quill) {\n      console.log('editor focus!', quill)\n    },\n    onEditorReady (quill) {\n      console.log('editor ready!', quill)\n      \n    },\n    getarticleslist () { //  查询列表\n      articleslist(this.para).then(res => {\n        console.log(res)\n        let { code, msg, data, total } = res.data\n        if (code !== 200) {\n          this.$message.error(msg)\n        } else {\n          this.list.data = data\n          this.list.total = total\n        }\n      })\n    },\n    handleSet (obj, row) { //  根据不同状态处理对应事件\n      console.log(obj, row)\n      switch (obj) {\n        case 'add':\n          this.form = {}\n          this.show = 'add'\n          break\n        case 'back':\n          this.show = 'list'\n          break\n        case 'edit':\n          this.form = row\n          this.show = 'edit'\n          break\n        case 'delete':\n          this.show = 'list'\n          this.$confirm('此操作将删除该数据是否继续?', '提示', {\n            confirmButtonText: '继续',\n            cancelButtonText: '取消',\n            type: 'danger'\n          }).then(() => {\n            this.form._id = row._id\n            let para = new URLSearchParams(this.form)\n            articlesdelete(para).then(res => {\n              let { code, msg } = res\n              if (code === 200) {\n                this.$message.success(msg)\n                this.getarticleslist()\n              } else {\n                this.$message.error(msg)\n              }\n            })\n          }).catch(() => {\n            this.$message.info('已取消')\n          })\n          break\n      }\n    },\n    handleSubmit () { //  发布文章\n      if (this.form.title === '' || !this.form.title) {\n        this.$message.error('标题不能为空')\n      } else {\n        this.form.author = sessionStorage.getItem('user')\n        this.form.uid = sessionStorage.getItem('uid')\n        this.form.date = utils.formatterTime(new Date())\n        console.log(this.form)\n        let para = new URLSearchParams(this.form)\n        let a\n        if (this.show === 'add') {\n          a = articlesadd(para)\n        } else {\n          a = articlesedit(para)\n        }\n        a.then(res => {\n          console.log(res)\n          let { code, msg } = res\n          if (code === 200) {\n            this.getarticleslist()\n            this.show = 'list'\n            this.$message.success(msg)\n          } else {\n            this.$message.error(msg)\n          }\n        })\n      }\n    }\n  },\n  computed: {\n    editor() {\n      console.log(1)\n      return this.$refs.myQuillEditor.quill\n    }\n  },\n}\n</script>\n<style lang=\"stylus\">\n#articles {\n  .articles__btn {\n    text-align right \n    margin-bottom 20px\n  }\n  .articles__title {\n    margin 20px 0\n    font-size 20px\n  }\n  .ql-container {\n    height 800px\n  }\n}\n</style>\n\n"],"sourceRoot":"src/views"}]}